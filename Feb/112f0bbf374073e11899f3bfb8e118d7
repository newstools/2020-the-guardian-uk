Grieving families have held prayers in the Thai city of Nakhon Ratchasima as the media and prime minister faced criticism over their response to a mass shooting that left 29 people dead. Relatives gathered at a morgue where some bodies were returned by the authorities. About 20 people remain in hospital. The attack, during which a rogue soldier shot drivers, pedestrians and shoppers before continuing firing at people inside a shopping centre, has shocked the country. Dozens of people who were trapped inside barricaded themselves in dark storage rooms and bathrooms as security teams carried out an operation that lasted 16 hours. Police have since accused several Thai news channels of undermining their efforts, and inadvertently providing intelligence to the gunman, by broadcasting live footage from the shopping centre. “He was watching the TV, for sure,” Kissana Phathanacharoen, the police’s deputy spokesman, said of the gunman, Jakrapanth Thomma, who was killed at about 9am on Sunday. “It’s not a theory, it’s reality.” “If the local media, and also Facebook users, share what police have been doing then he himself can use that as a source of information for his own benefit,” he said, adding that many channels had also shared graphic footage from the scene. The prime minister, Prayut Chan-ocha, was also criticised over the tone of his response, after he took selfies and high-fived a crowd when visiting the city on Sunday. He later issued a statement clarifying that he had been trying to provide encouragement to others. “I intended to offer my moral support … my expression may have been misunderstood or made many people uncomfortable,” he said. “I believe we will pass this nightmare by uniting together.” A traditional Isaan ceremony, organised by the mayor, was expected to take place on Tuesday. Mental health crisis teams have also been sent to support those who lost relatives. The attack began late on Saturday afternoon when the gunman fired at a house in the Muang district of Nakhon Ratchasima, before moving to an army barracks where he killed his commanding officer and stole a hoard of weapons. Thomma then proceeded to the city centre, shooting at a Buddhist temple, before attacking people outside and inside the Terminal 21 shopping centre. One witness, a school student, said he was in his mother’s car as she passed the gunman’s vehicle. The assailant “got out of the car and fired into the window. At that, I ducked down and didn’t do anything until I felt that car hit something. It hit a tree,” Nachote Chotiklang told Associated Press. When the teenager was asked what happened to his mother, he shook his head. Another man explained that she had died.Officials said Thomma had acted while furious over a land dispute. He had live-streamed parts of the attack on Facebook. Facebook removed his page at about 11pm, five hours after he began firing at the shopping centre. Phathanacharoen criticised Thai news channels for giving unnecessary prominence to the comments posted online by Thomma. The National Broadcasting and Telecommunications Commission said it would speak to media outlets, though was not clear what penalties agencies could face. Officials are also in contact with Facebook and other online platforms as part of their operation. Outside Terminal 21, people left flowers and messages of support.Suda Rianmanee, 55, who runs a bakery shop, said a local hospital she had visited had been packed with people. “I went there to hand out snacks to doctors and nurses,” she said, adding that she donated 130 food packs. The city was quiet on Sunday, she said, but on Monday there was more traffic as people came to pay their respects. Rawiwan Chanrit, 30, was in Terminal 21 with her boyfriend when they heard shooting. A security guard directed them to a banquet hall on the fifth floor where a school party was being hosted. “We all tried to stay away from the door, we were hiding inside the curtains,” she said, adding that she messaged her family throughout. Eventually, she was evacuated by police. She was told to stay as low as possible. “When I arrived at parking space, which is in the open air, my boyfriend told me that I had to run. So I ran until I met an official. During the wait I was very scared. I cannot believe what has happened.” Associated Press and Agence France-Presse contributed to this report
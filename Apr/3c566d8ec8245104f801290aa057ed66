The US Senate passed a near $500bn coronavirus aid package on Tuesday for small businesses, including additional help for hospitals and virus testing. “I welcome this bipartisan agreement,” Senate majority leader Mitch McConnell said Tuesday as the bill was passed. The aid package is the second for small business, which have been hit hard by the pandemic and shed millions of jobs. The first proved controversial, with big businesses including Shake Shack and Ruth’s Chris Steakhouse receiving millions while many small businesses missed out. Shake Shack has now handed back the $10m loan it received. Ruth’s Chris – which had revenues of $468m last year – received $20m. Treasury secretary Steven Mnuchin said that larger firms would now be blocked from using the new program. Small businesses in hard-hit New York were skeptical that the new money would get to them in time, having missed out on the first wave of payments. “This is going to be the end of us all,” said Brian Colgan, who runs ACME, a props and furniture rental business in Brooklyn. He said none of his small business contacts had received funds. Nichelina Mavros, co-owner of Dépanneur, a Brooklyn grocery store, said it was clear the first bailout favored big business. “Ninety eight per cent of New York businesses are small businesses. In my network not one of them got the money.” The deal came after post-midnight talks among leaders of both parties and top Trump administration officials produced a breakthrough agreement on the package. Donald Trump said he supports the measure, tweeting: “I urge the Senate and House to pass the Paycheck Protection Program and Health Care Enhancement Act with additional funding.” Trump said he was open to including in a subsequent virus aid package fiscal relief for state and local government – which Democrats had wanted for the current bill – along with infrastructure projects. Most of the funding, more than $300bn, would go to boost a small-business payroll loan program that ran out of money last week. An additional $75bn would be given to hospitals, and $25bn would be spent to boost testing for the virus, a key step in building the confidence required to reopen state economies. Congressman Steny Hoyer, the House majority leader, told a conference call with reporters that House votes would occur on Thursday. He said the House will also vote on a proposal to allow proxy voting during the pandemic, a first for Congress, which has required in-person business essentially since its founding. But as the Trump administration pushes to reopen the economy, the landmark rules change met with objections from Republicans. “I don’t support it at all,” said Clay Higgins, a Louisiana congressman and one of a handful of Republicans who showed up for Tuesday’s pro forma session to protest against proxy votes. The emerging virus aid package was originally designed by Republicans as a $250bn stopgap to replenish the payroll subsidies for smaller businesses. It has grown into the second largest of the four coronavirus response bills so far. Democratic demands have caused the measure to balloon, though they will probably be denied the money they want to help struggling state and local governments. With small-business owners reeling during a coronavirus outbreak that has shuttered much economic activity, the administration has been pressing for an immediate replenishment of the paycheck protection program. Talks have dragged as the Democrats tacked on the health priorities and two sides have quarreled over the design of a nationwide testing regime, among other unsettled pieces. The accord links the administration’s effort to replenish the small business fund with Democrats’ demands for more money for hospitals and virus testing. It would provide more than $300bn for the small business payroll program, with $60bn or so set aside for community lenders that seek to focus on under-banked neighborhoods and rural areas. Another $60bn would be available for a small-business loans and grants program that has previously been aimed at helping businesses harmed by natural disasters like hurricanes. Additionally, it would bring $75bn for hospitals and $25bn for testing, according to those involved in the talks. The government’s paycheck protection program has been swamped by companies applying for loans and reached its appropriations limit last Thursday after approving nearly 1.7m loans. That left thousands of small businesses in limbo as they sought help. The National Federation of Independent Business, a GOP-friendly organization that advocates for small businesses in Washington, said it had surveyed their members and reported that only one in five applicants had received money so far.